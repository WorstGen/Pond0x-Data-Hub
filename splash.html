<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PONDü§ùX DATA DASHBOARD</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      /* Light mode variables */
      --bg-gradient: linear-gradient(90deg, #0ec404 0%, #25db0f 15%, #13FF22 35%, #13FF22 65%, #25db0f 85%, #0ec404 100%);
      --primary-color: #7b3aad;
      --accent-color: #FF13F0;
      --secondary-accent: #f19cfd;
      --navbar-bg: #FF13F0;
      --nav-text: #13FF22;
      --card-bg: rgba(123, 58, 173, 0.15);
      --card-border: rgba(241, 156, 253, 0.3);
      --input-bg: rgba(255, 255, 255, 0.2);
      --link-item-bg: rgba(123, 58, 173, 0.08);
      --shadow-primary: rgba(123, 58, 173, 0.2);
      --shadow-accent: rgba(241, 156, 253, 0.4);
      --text-primary: #7b3aad;
      --text-secondary: #7b3aad;
      --success-color: #22c55e;
      --warning-color: #f59e0b;
      --error-color: #ef4444;
      --info-color: #3b82f6;
    }

    [data-theme="dark"] {
      /* Dark mode variables */
      --bg-gradient: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 20%, #16213e 40%, #1a1a2e 60%, #0f0f0f 80%, #0a0a0a 100%);
      --primary-color: #e0b3ff;
      --accent-color: #ff3df0;
      --secondary-accent: #bd7cfd;
      --navbar-bg: #1a1a2e;
      --nav-text: #00ff88;
      --card-bg: rgba(26, 26, 46, 0.15);
      --card-border: rgba(189, 124, 253, 0.4);
      --input-bg: rgba(26, 26, 46, 0.4);
      --link-item-bg: rgba(26, 26, 46, 0.5);
      --shadow-primary: rgba(189, 124, 253, 0.3);
      --shadow-accent: rgba(255, 61, 240, 0.5);
      --text-primary: #e0b3ff;
      --text-secondary: #c9a3ff;
      --success-color: #34d399;
      --warning-color: #fbbf24;
      --error-color: #f87171;
      --info-color: #60a5fa;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg-gradient);
      color: var(--text-primary);
      min-height: 100vh;
      padding-top: 60px;
      position: relative;
      overflow-x: hidden;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Flowing wave animation for light mode */
    body {
      background: 
        linear-gradient(0deg, 
          rgba(19, 255, 34, 0.4) 0%, 
          rgba(37, 219, 15, 0.3) 50%, 
          rgba(14, 196, 4, 0.35) 100%),
        linear-gradient(180deg, 
          rgba(25, 200, 20, 0.25) 0%, 
          rgba(19, 255, 34, 0.2) 100%),
        linear-gradient(135deg, #0ec404 0%, #25db0f 25%, #13FF22 50%, #25db0f 75%, #0ec404 100%);
      background-size: 100% 200%, 100% 150%, 100% 100%;
      animation: smoothLiquidFlow 6s ease-in-out infinite;
    }

    @keyframes smoothLiquidFlow {
      0%, 100% {
        background-position: 0% 100%, 0% 0%, 0% 0%;
      }
      50% {
        background-position: 0% 0%, 0% 100%, 0% 0%;
      }
    }

    /* Flowing wave animation for dark mode */
    [data-theme="dark"] body {
      background: 
        linear-gradient(0deg, 
          rgba(189, 124, 253, 0.15) 0%, 
          rgba(255, 61, 240, 0.1) 50%, 
          rgba(26, 26, 46, 0.2) 100%),
        linear-gradient(180deg, 
          rgba(26, 26, 46, 0.15) 0%, 
          rgba(189, 124, 253, 0.08) 100%),
        linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 25%, #16213e 50%, #1a1a2e 75%, #0f0f0f 100%);
      background-size: 100% 180%, 100% 140%, 100% 100%;
      animation: smoothLiquidFlowDark 8s ease-in-out infinite;
    }

    @keyframes smoothLiquidFlowDark {
      0%, 100% {
        background-position: 0% 100%, 0% 0%, 0% 0%;
      }
      50% {
        background-position: 0% 0%, 0% 100%, 0% 0%;
      }
    }

    /* Bubble container - can be hidden */
    .bubble-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
      transition: opacity 0.3s ease;
    }

    .bubble-container.hidden {
      opacity: 0;
    }

    /* Cook button styling - bottom right position */
    .cook-button {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: linear-gradient(135deg, var(--secondary-accent) 0%, var(--accent-color) 100%);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 50px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 
        0 6px 20px var(--shadow-accent),
        inset 2px 2px 10px rgba(255, 255, 255, 0.2),
        inset -2px -2px 10px rgba(0, 0, 0, 0.1);
      z-index: 1002;
      display: flex;
      align-items: center;
      gap: 8px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .cook-button:hover {
      transform: translateY(-3px);
      box-shadow: 
        0 10px 30px var(--shadow-accent),
        inset 2px 2px 10px rgba(255, 255, 255, 0.3),
        inset -2px -2px 10px rgba(0, 0, 0, 0.1);
    }

    .cook-button.bubbles-off {
      background: linear-gradient(135deg, #666 0%, #999 100%);
      box-shadow: 
        0 6px 20px rgba(0, 0, 0, 0.3),
        inset 2px 2px 10px rgba(255, 255, 255, 0.1),
        inset -2px -2px 10px rgba(0, 0, 0, 0.2);
    }

    .cook-button.bubbles-off:hover {
      box-shadow: 
        0 10px 30px rgba(0, 0, 0, 0.4),
        inset 2px 2px 10px rgba(255, 255, 255, 0.2),
        inset -2px -2px 10px rgba(0, 0, 0, 0.2);
    }

    /* Dark mode toggle button */
    .theme-toggle {
      position: fixed;
      top: 70px;
      right: 20px;
      background: transparent;
      border: none;
      cursor: pointer;
      font-size: 1.5rem;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 1001;
      padding: 5px;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    }

    .theme-toggle:hover {
      transform: scale(1.2);
      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.4));
    }

    [data-theme="dark"] .theme-toggle {
      filter: drop-shadow(0 2px 4px rgba(255, 255, 255, 0.2));
    }

    [data-theme="dark"] .theme-toggle:hover {
      transform: scale(1.2);
      filter: drop-shadow(0 4px 8px rgba(255, 255, 255, 0.3));
    }

    /* Enhanced dark mode bubbles */
    .bubble {
      position: absolute;
      border-radius: 50%;
      animation: bubble-rise linear infinite;
      opacity: 0;
      background: 
        radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.3) 30%, transparent 70%),
        radial-gradient(circle at 80% 80%, rgba(0, 0, 0, 0.1) 0%, transparent 50%),
        linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.05));
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 
        0 0 20px rgba(255, 255, 255, 0.2),
        inset 3px 3px 15px rgba(255, 255, 255, 0.4),
        inset -3px -3px 15px rgba(0, 0, 0, 0.1),
        0 0 0 1px rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(1px);
    }

    [data-theme="dark"] .bubble {
      background: 
        radial-gradient(circle at 25% 25%, rgba(189, 124, 253, 0.6) 0%, rgba(255, 61, 240, 0.3) 30%, transparent 70%),
        radial-gradient(circle at 80% 80%, rgba(26, 26, 46, 0.3) 0%, transparent 50%),
        linear-gradient(135deg, rgba(189, 124, 253, 0.2), rgba(255, 61, 240, 0.1));
      border: 1px solid rgba(189, 124, 253, 0.4);
      box-shadow: 
        0 0 25px rgba(189, 124, 253, 0.3),
        inset 3px 3px 15px rgba(189, 124, 253, 0.2),
        inset -3px -3px 15px rgba(0, 0, 0, 0.2),
        0 0 0 1px rgba(189, 124, 253, 0.2);
    }

    /* Bubble animations with smooth wobble/wave motion */
    @keyframes bubble-rise {
      0% {
        opacity: 0;
        transform: translateY(100vh) translateX(0px) scale(0.3);
      }
      10% {
        opacity: 0.8;
        transform: translateY(90vh) translateX(15px) scale(0.5);
      }
      20% {
        opacity: 0.9;
        transform: translateY(80vh) translateX(-10px) scale(0.6);
      }
      30% {
        opacity: 0.9;
        transform: translateY(70vh) translateX(20px) scale(0.7);
      }
      40% {
        opacity: 0.9;
        transform: translateY(60vh) translateX(-5px) scale(0.8);
      }
      50% {
        opacity: 0.9;
        transform: translateY(50vh) translateX(12px) scale(0.9);
      }
      60% {
        opacity: 0.9;
        transform: translateY(40vh) translateX(-15px) scale(0.95);
      }
      70% {
        opacity: 0.9;
        transform: translateY(30vh) translateX(8px) scale(1);
      }
      80% {
        opacity: 0.8;
        transform: translateY(20vh) translateX(-12px) scale(1);
      }
      90% {
        opacity: 0.7;
        transform: translateY(10vh) translateX(6px) scale(1);
      }
      100% {
        opacity: 0;
        transform: translateY(-10vh) translateX(0px) scale(1);
      }
    }

    .container {
      max-width: 1200px;
      width: 100%;
      position: relative;
      z-index: 1;
    }

    .header {
      text-align: center;
      margin-bottom: 3rem;
    }

    .header h1 {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 1rem;
      text-shadow: 0 0 20px var(--shadow-primary);
      color: var(--text-primary);
    }

    .header p {
      font-size: 1.2rem;
      opacity: 0.9;
      color: var(--text-primary);
    }

    .card {
      max-width: 1200px;
      background: var(--card-bg);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 3rem;
      border: 2px solid var(--card-border);
      box-shadow: 0 12px 40px var(--shadow-primary);
      transition: all 0.3s ease;
      margin: 0 auto;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 16px 50px var(--shadow-primary);
      border-color: var(--card-border);
    }

    [data-theme="dark"] .card:hover {
      box-shadow: 
        0 16px 50px var(--shadow-primary),
        0 0 30px rgba(189, 124, 253, 0.2);
    }

    .card h2 {
      font-size: 1.6rem;
      margin-bottom: 2rem;
      color: var(--text-primary);
      font-weight: 700;
      text-align: center;
    }

    .input-section {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 2rem;
      align-items: center;
    }

    .wallet-input-wrapper {
      position: relative;
      width: 100%;
      max-width: 500px;
    }

    .wallet-input {
      width: 100%;
      padding: 15px 50px 15px 20px;
      border-radius: 12px;
      border: 2px solid var(--card-border);
      background: var(--input-bg) !important;
      color: var(--text-primary);
      font-size: 1.1rem;
      transition: all 0.3s ease;
      position: relative;
      z-index: 1;
    }

    .wallet-input:focus {
      outline: none;
      border-color: var(--accent-color);
      box-shadow: 0 0 20px var(--shadow-accent);
      background: var(--input-bg) !important;
    }

    .wallet-input::placeholder {
      color: var(--text-secondary);
      opacity: 0.6;
    }

    /* Arrow button */
    .arrow-btn {
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      background: linear-gradient(135deg, var(--secondary-accent) 0%, var(--accent-color) 100%);
      border: none;
      cursor: pointer;
      padding: 8px 12px;
      z-index: 2;
      color: white;
      font-size: 1.2rem;
      border-radius: 8px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .arrow-btn:hover {
      transform: translateY(-50%) scale(1.1);
      box-shadow: 0 4px 15px var(--shadow-accent);
    }

    /* Wallet type border indicators */
    .wallet-input-wrapper.wallet-type-solana::before {
      content: '';
      position: absolute;
      top: -3px;
      left: -3px;
      right: -3px;
      bottom: -3px;
      background: linear-gradient(135deg, #9945FF 0%, #14F195 100%);
      border-radius: 15px;
      z-index: 0;
    }

    .wallet-input-wrapper.wallet-type-solana .wallet-input {
      border: none;
      background: var(--input-bg) !important;
      box-shadow: 0 0 15px rgba(153, 69, 255, 0.2);
    }

    .wallet-input-wrapper.wallet-type-solana .wallet-input:focus {
      box-shadow: 0 0 20px rgba(153, 69, 255, 0.3);
      background: var(--input-bg) !important;
    }

    /* Loading and Error States */
    .loading-section {
      display: none;
      text-align: center;
      padding: 2rem;
      animation: fadeIn 0.5s ease;
    }

    .loading-section.show {
      display: block;
    }

    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 4px solid var(--card-border);
      border-top: 4px solid var(--accent-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 1rem auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .error-section {
      display: none;
      text-align: center;
      padding: 2rem;
      animation: fadeIn 0.5s ease;
    }

    .error-section.show {
      display: block;
    }

    .error-icon {
      font-size: 3rem;
      color: var(--error-color);
      margin-bottom: 1rem;
    }

    .error-message {
      color: var(--error-color);
      font-size: 1.1rem;
      font-weight: 600;
      white-space: pre-wrap;
    }

    /* Dashboard Section */
    .dashboard-section {
      display: none;
    }

    .dashboard-section.show {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .section-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 1.5rem;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .data-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .data-card {
      background: var(--link-item-bg);
      backdrop-filter: blur(15px);
      border-radius: 12px;
      padding: 1.5rem;
      border: 1px solid var(--card-border);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .data-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px var(--shadow-primary);
      border-color: var(--accent-color);
    }

    .data-card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1rem;
    }

    .data-card-title {
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .data-card-icon {
      font-size: 1.2rem;
      opacity: 0.8;
    }

    .data-card-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--accent-color);
      text-align: center;
      margin: 1rem 0;
      text-shadow: 0 0 10px var(--shadow-accent);
    }

    .data-card-description {
      font-size: 0.9rem;
      color: var(--text-secondary);
      opacity: 0.8;
      text-align: center;
      line-height: 1.4;
    }

    .status-badge {
      padding: 0.3rem 0.8rem;
      border-radius: 50px;
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .status-healthy {
      background: linear-gradient(135deg, var(--success-color), #16a34a);
      color: white;
    }

    .status-warning {
      background: linear-gradient(135deg, var(--warning-color), #d97706);
      color: white;
    }

    .status-danger {
      background: linear-gradient(135deg, var(--error-color), #dc2626);
      color: white;
    }

    .status-info {
      background: linear-gradient(135deg, var(--info-color), #2563eb);
      color: white;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: var(--card-border);
      border-radius: 4px;
      overflow: hidden;
      margin: 0.5rem 0;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent-color), var(--secondary-accent));
      border-radius: 4px;
      transition: width 0.5s ease;
      position: relative;
    }

    .progress-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background-color: var(--navbar-bg);
      z-index: 1000;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    [data-theme="dark"] .navbar {
      box-shadow: 
        0 4px 10px rgba(0, 0, 0, 0.4),
        0 0 20px rgba(189, 124, 253, 0.1);
    }

    .nav-container {
      display: flex;
      justify-content: center;
      align-items: center;
      max-width: 1100px;
      margin: 0 auto;
      padding: 0.3rem 1rem;
      flex-wrap: wrap;
      position: relative;
    }

    .nav-toggle {
      display: none;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: white;
      cursor: pointer;
      margin-right: auto;
    }

    .nav-title {
      color: var(--accent-color);
      font-weight: bold;
      font-size: 1.1rem;
      text-align: center;
      width: 100%;
      margin-bottom: 0.5rem;
      display: none;
    }

    .nav-links {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .nav-links a {
      color: var(--nav-text);
      text-decoration: none;
      font-weight: bold;
      font-size: 1rem;
      padding: 0.5rem;
      border-radius: 5px;
      transition: all 0.3s ease;
    }

    .nav-links a:hover {
      background-color: rgba(19, 255, 34, 0.15);
      color: white;
      transform: translateY(-2px);
    }

    [data-theme="dark"] .nav-links a:hover {
      background-color: rgba(0, 255, 136, 0.2);
      box-shadow: 0 4px 15px rgba(0, 255, 136, 0.2);
    }

    .container {
      max-width: 1200px;
      width: 100%;
      margin: 0 auto;
      padding: 1rem;
    }

    .header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .header img {
      max-width: 69%;
      height: auto;
      transition: all 0.3s ease;
      margin-top: 1.2em;
    }

    [data-theme="dark"] .header img {
      filter: brightness(1.1) contrast(1.1) drop-shadow(0 0 20px rgba(189, 124, 253, 0.3));
    }

    @media (max-width: 768px) {
      .nav-container {
        flex-direction: column;
        align-items: flex-start;
        padding: 0.5rem 1rem;
      }

      .nav-toggle {
        display: block;
        align-self: flex-start;
        margin: 0.25rem 0;
      }

      .nav-title {
        display: block;
      }

      .nav-links {
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
        width: 100%;
        display: none;
      }

      .nav-links.show {
        display: flex;
      }
      
      .nav-links a {
        font-size: 0.9rem;
        padding: 0.4rem 0.6rem;
      }

      .cook-button {
        bottom: 20px;
        right: 20px;
        padding: 10px 18px;
        font-size: 0.9rem;
      }
      
      .theme-toggle {
        top: 65px;
        right: 15px;
        font-size: 1.3rem;
      }

      .data-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .card {
        padding: 1.5rem;
        margin: 0 0.5rem;
      }

      .header h1 {
        font-size: 2.2rem;
      }

      .data-card-value {
        font-size: 1.5rem;
      }
    }

    /* Enhanced transitions for theme switching */
    * {
      transition: color 0.4s cubic-bezier(0.4, 0, 0.2, 1), 
                  background-color 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                  border-color 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                  box-shadow 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .debug-info {
      background: var(--link-item-bg);
      border: 1px solid var(--card-border);
      border-radius: 8px;
      padding: 1rem;
      margin-top: 2rem;
      font-family: monospace;
      font-size: 0.9rem;
      white-space: pre-wrap;
      max-height: 300px;
      overflow-y: auto;
    }

    .debug-info h3 {
      margin-bottom: 0.5rem;
      font-family: inherit;
      color: var(--accent-color);
    }
  </style>
</head>
<body>
  <!-- Dark mode toggle button -->
  <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()" title="Toggle dark mode">
    ‚òÄÔ∏è
  </button>

  <!-- Cook button for toggling bubbles -->
  <button class="cook-button" id="cookButton" onclick="toggleBubbles()">
    üë®‚Äçüç≥ Cook
  </button>

  <!-- Bubble container for animation -->
  <div class="bubble-container" id="bubbleContainer"></div>

  <nav class="navbar">
    <div class="nav-container">
      <button class="nav-toggle" onclick="toggleNav()">‚ò∞</button>
      
      <div class="nav-links" id="navLinks">
        <a href="https://worstgen.github.io/Pond0x-Data-Hub/">PERSONAL LINKS</a>
        <a href="https://worstgen.github.io/Pond0x-Data-Hub/MiningClaims.html">MINING CLAIMS</a>
        <a href="https://worstgen.github.io/Pond0x-Data-Hub/HashBoosts.html">HASH BOOSTS</a>
        <a href="https://worstgen.github.io/Pond0x-Data-Hub/wPONDReceived.html">wPOND RECEIVED</a>
        <a href="https://worstgen.github.io/Pond0x-Data-Hub/RigActivations.html">RIG ACTIVATIONS</a>
      </div>
    </div>
  </nav>

  <div class="container">
    <div class="header">
      <img src="https://raw.githubusercontent.com/WorstGen/Pond0x-Data-Hub/refs/heads/main/pond0xdatahub.png" alt="POND0X Data Hub Logo">
    </div>
  </div>

  <div class="card">
    <h2>PONDü§ùX Mining Health Dashboard</h2>
    
    <div class="input-section">
      <div class="wallet-input-wrapper" id="wallet-input-wrapper">
        <input 
          type="text" 
          id="wallet-input" 
          class="wallet-input"
          placeholder="Enter your Solana wallet address"
        >
        <button class="arrow-btn" id="arrowBtn" onclick="fetchMiningData()">
          üìä
        </button>
      </div>
    </div>

    <!-- Loading Section -->
    <div id="loading-section" class="loading-section">
      <div class="loading-spinner"></div>
      <p style="color: var(--text-primary); font-size: 1.1rem;">Fetching your mining health data...</p>
    </div>

    <!-- Error Section -->
    <div id="error-section" class="error-section">
      <div class="error-icon">‚ö†Ô∏è</div>
      <div class="error-message" id="error-message">Error loading data</div>
    </div>

    <!-- Dashboard Section -->
    <div id="dashboard-section" class="dashboard-section">
      <div class="section-title">
        ‚õèÔ∏è Your Mining Health Overview
      </div>
      
      <div class="data-grid" id="data-grid">
        <!-- Data cards will be populated here -->
      </div>

      <div class="section-title" style="margin-top: 3rem;">
        üìà Detailed Metrics
      </div>
      
      <div class="data-grid" id="detailed-grid">
        <!-- Detailed metrics will be populated here -->
      </div>
    </div>

    <!-- Debug Information -->
    <div id="debug-section" class="debug-info" style="display: none;">
      <h3>üîç Debug Information</h3>
      <div id="debug-content"></div>
    </div>
  </div>

<script>
// Global variables
let isDebugging = false;

// Theme management with cross-page persistence
const themeManager = {
  init() {
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    this.setTheme(prefersDark ? 'dark' : 'light');
    
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
      this.setTheme(e.matches ? 'dark' : 'light');
    });
  },
  
  getCurrentTheme() {
    return document.documentElement.getAttribute('data-theme') || 'light';
  },
  
  setTheme(theme) {
    document.documentElement.setAttribute('data-theme', theme);
    const button = document.getElementById('themeToggle');
    if (button) {
      button.textContent = theme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
      button.title = theme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode';
    }
  },
  
  toggle() {
    const currentTheme = this.getCurrentTheme();
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    this.setTheme(newTheme);
  }
};

// Optimized bubble animation system
const bubbleSystem = {
  container: null,
  bubbles: [],
  maxBubbles: 25,
  initialized: false,
  animationRunning: true,
  animationInterval: null,
  
  init() {
    if (this.initialized) return;
    this.container = document.getElementById('bubbleContainer');
    this.createBubblePool();
    this.startAnimation();
    this.initialized = true;
  },

  stop() {
    this.animationRunning = false;
    if (this.animationInterval) {
      clearInterval(this.animationInterval);
    }
    this.bubbles.forEach(bubble => {
      if (bubble.timer) {
        clearTimeout(bubble.timer);
      }
      bubble.element.style.display = 'none';
      bubble.active = false;
    });
  },

  start() {
    if (!this.animationRunning) {
      this.animationRunning = true;
      this.startAnimation();
    }
  },
  
  createBubblePool() {
    for (let i = 0; i < this.maxBubbles; i++) {
      const bubble = document.createElement('div');
      bubble.className = 'bubble';
      bubble.style.display = 'none';
      this.container.appendChild(bubble);
      this.bubbles.push({
        element: bubble,
        active: false,
        timer: 0
      });
    }
  },
  
  getRandomBubble() {
    return this.bubbles.find(b => !b.active) || this.bubbles[0];
  },
  
  createBubble() {
    const bubble = this.getRandomBubble();
    if (!bubble || bubble.active) return;
    
    const size = Math.random() * 40 + 10;
    const left = Math.random() * 100;
    const duration = Math.random() * 4 + 6;
    const delay = Math.random() * 2;
    
    const element = bubble.element;
    element.style.cssText = `
      width: ${size}px;
      height: ${size}px;
      left: ${left}%;
      animation: bubble-rise ${duration}s linear ${delay}s forwards;
      display: block;
    `;
    
    bubble.active = true;
    bubble.timer = setTimeout(() => {
      element.style.display = 'none';
      bubble.active = false;
    }, (duration + delay) * 1000);
  },
  
  startAnimation() {
    if (!this.animationRunning) return;
    
    for (let i = 0; i < 8; i++) {
      setTimeout(() => {
        if (this.animationRunning) this.createBubble();
      }, i * 600);
    }
    
    this.animationInterval = setInterval(() => {
      if (this.animationRunning && Math.random() < 0.8) {
        this.createBubble();
      }
    }, 900);
  }
};

// Debug system
const debugSystem = {
  logs: [],
  
  log(message, type = 'info') {
    const timestamp = new Date().toLocaleTimeString();
    this.logs.push({ timestamp, message, type });
    console.log(`[${timestamp}] ${message}`);
    this.updateDebugDisplay();
  },
  
  updateDebugDisplay() {
    const debugContent = document.getElementById('debug-content');
    if (debugContent) {
      debugContent.textContent = this.logs.map(log => 
        `[${log.timestamp}] ${log.type.toUpperCase()}: ${log.message}`
      ).join('\n');
    }
  },
  
  show() {
    document.getElementById('debug-section').style.display = 'block';
    isDebugging = true;
  },
  
  hide() {
    document.getElementById('debug-section').style.display = 'none';
    isDebugging = false;
  }
};

// Wallet validation
function validateSolanaAddress(address) {
  if (!address || address.trim().length === 0) return false;
  
  // Basic Solana address validation
  const trimmed = address.trim();
  return (
    trimmed.length >= 32 && 
    trimmed.length <= 44 && 
    /^[1-9A-HJ-NP-Za-km-z]+$/.test(trimmed) && 
    !trimmed.startsWith('0x')
  );
}

function detectWalletType() {
  const walletAddress = document.getElementById('wallet-input').value.trim();
  const walletInputWrapper = document.getElementById('wallet-input-wrapper');
  
  // Remove all wallet type classes first
  walletInputWrapper.classList.remove('wallet-type-solana');
  
  // Don't add any classes if no input
  if (!walletAddress) {
    return 'none';
  }
  
  // Solana address detection (base58, 32-44 characters, no 0x prefix)
  if (validateSolanaAddress(walletAddress)) {
    walletInputWrapper.classList.add('wallet-type-solana');
    return 'solana';
  }
  
  // Invalid addresses
  return 'invalid';
}

// Mining Data Fetcher with enhanced debugging
async function fetchMiningData() {
  const walletInput = document.getElementById('wallet-input');
  const walletAddress = walletInput.value.trim();
  
  debugSystem.show();
  debugSystem.log(`Starting fetch for wallet: ${walletAddress}`);
  
  if (!validateSolanaAddress(walletAddress)) {
    debugSystem.log('Invalid Solana address format', 'error');
    showError('Please enter a valid Solana wallet address');
    return;
  }
  
  showLoading();
  
  // Test multiple API endpoints and approaches
  const endpoints = [
    `https://pond0x-proxy.wsfdxv2hjq.workers.dev/health?id=${encodeURIComponent(walletAddress)}`,
    `https://pond0x-proxy.wsfdxv2hjq.workers.dev/health/${encodeURIComponent(walletAddress)}`,
    `https://pond0x-proxy.wsfdxv2hjq.workers.dev/?endpoint=health&id=${encodeURIComponent(walletAddress)}`
  ];
  
  debugSystem.log(`Testing ${endpoints.length} different endpoint formats...`);
  
  for (let i = 0; i < endpoints.length; i++) {
    const apiUrl = endpoints[i];
    debugSystem.log(`Attempt ${i + 1}: ${apiUrl}`);
    
    try {
      debugSystem.log(`Attempting fetch with different CORS modes...`);
      
      // Try different fetch configurations
      const fetchConfigs = [
        {
          method: 'GET',
          mode: 'cors',
          headers: {
            'Accept': 'application/json',
            'Origin': window.location.origin
          }
        },
        {
          method: 'GET',
          mode: 'no-cors',
          headers: {
            'Accept': 'application/json'
          }
        },
        {
          method: 'GET',
          headers: {
            'Accept': 'application/json',
            'Access-Control-Request-Method': 'GET',
            'Access-Control-Request-Headers': 'accept'
          }
        }
      ];
      
      for (let configIndex = 0; configIndex < fetchConfigs.length; configIndex++) {
        const config = fetchConfigs[configIndex];
        debugSystem.log(`Config ${configIndex + 1}: mode=${config.mode || 'default'}`);
        
        try {
          const response = await fetch(apiUrl, config);
          
          debugSystem.log(`Response received - Status: ${response.status} ${response.statusText}`);
          debugSystem.log(`Response type: ${response.type}`);
          debugSystem.log(`Response headers: ${JSON.stringify([...response.headers.entries()])}`);
          debugSystem.log(`Response URL: ${response.url}`);
          
          if (config.mode === 'no-cors') {
            debugSystem.log('No-CORS mode: Cannot read response data, but request succeeded', 'warning');
            showError('Connection successful but CORS configuration needed.\nPlease add proper CORS headers to your Cloudflare Worker.');
            return;
          }
          
          if (!response.ok) {
            const errorText = await response.text().catch(() => 'Unable to read error text');
            debugSystem.log(`Error response body: ${errorText}`, 'error');
            throw new Error(`HTTP ${response.status}: ${response.statusText}. ${errorText}`);
          }
          
          const data = await response.json();
          debugSystem.log(`Success! Received data: ${JSON.stringify(data, null, 2)}`);
          
          // Check if we got valid data
          if (!data || typeof data !== 'object') {
            debugSystem.log('Invalid response format received', 'error');
            throw new Error('Invalid response format received from API');
          }
          
          displayMiningData(data);
          return; // Success! Exit the function
          
        } catch (configError) {
          debugSystem.log(`Config ${configIndex + 1} failed: ${configError.message}`, 'error');
          continue; // Try next config
        }
      }
      
    } catch (endpointError) {
      debugSystem.log(`Endpoint ${i + 1} failed: ${endpointError.message}`, 'error');
      continue; // Try next endpoint
    }
  }
  
  // If we get here, all attempts failed
  debugSystem.log('All endpoint attempts failed', 'error');
  
  // Test basic connectivity
  debugSystem.log('Testing basic worker connectivity...', 'info');
  try {
    const testResponse = await fetch('https://pond0x-proxy.wsfdxv2hjq.workers.dev/', { 
      method: 'GET',
      mode: 'no-cors' // Use no-cors to bypass CORS for connectivity test
    });
    debugSystem.log(`Basic connectivity test - Status: ${testResponse.status}, Type: ${testResponse.type}`, 'info');
    
    if (testResponse.type === 'opaque') {
      showError(`CORS Configuration Issue:

Your Cloudflare Worker is reachable but lacks proper CORS headers.

To fix this, add these headers to your Worker response:

Response Headers Needed:
‚Ä¢ Access-Control-Allow-Origin: *
‚Ä¢ Access-Control-Allow-Methods: GET, POST, OPTIONS
‚Ä¢ Access-Control-Allow-Headers: Content-Type, Accept
‚Ä¢ Access-Control-Max-Age: 86400

Example Worker Code:
const corsHeaders = {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',
  'Access-Control-Allow-Headers': 'Content-Type, Accept',
  'Content-Type': 'application/json'
};

// Handle OPTIONS preflight
if (request.method === 'OPTIONS') {
  return new Response(null, { headers: corsHeaders });
}

// Add to your response
return new Response(JSON.stringify(data), { headers: corsHeaders });`);
    }
  } catch (testError) {
    debugSystem.log(`Basic connectivity failed: ${testError.message}`, 'error');
    
    if (testError.message.includes('Failed to fetch')) {
      showError(`Network Connectivity Issue:

Cannot reach your Cloudflare Worker at:
https://pond0x-proxy.wsfdxv2hjq.workers.dev/

Possible causes:
1. Worker is not deployed or has been deleted
2. Domain name is incorrect
3. Worker domain is blocked by network/firewall
4. Worker has runtime errors preventing responses

Please check:
‚Ä¢ Worker deployment status in Cloudflare dashboard
‚Ä¢ Worker logs for runtime errors
‚Ä¢ Network connectivity to *.workers.dev domains`);
    }
  }
}

// Test function that users can call manually
function testWorkerEndpoints() {
  debugSystem.show();
  debugSystem.log('Manual endpoint testing started...', 'info');
  fetchMiningData();
}

function showLoading() {
  document.getElementById('loading-section').classList.add('show');
  document.getElementById('error-section').classList.remove('show');
  document.getElementById('dashboard-section').classList.remove('show');
}

function showError(message) {
  document.getElementById('error-message').textContent = message;
  document.getElementById('loading-section').classList.remove('show');
  document.getElementById('error-section').classList.add('show');
  document.getElementById('dashboard-section').classList.remove('show');
}

function showDashboard() {
  document.getElementById('loading-section').classList.remove('show');
  document.getElementById('error-section').classList.remove('show');
  document.getElementById('dashboard-section').classList.add('show');
}

function displayMiningData(data) {
  const dataGrid = document.getElementById('data-grid');
  const detailedGrid = document.getElementById('detailed-grid');
  
  // Clear existing data
  dataGrid.innerHTML = '';
  detailedGrid.innerHTML = '';
  
  debugSystem.log('Displaying mining data...');
  
  // Overview cards
  const overviewCards = [
    {
      title: '‚ö° Current Hash Rate',
      value: data.hashRate || '0',
      description: 'Your current mining hash rate',
      icon: '‚ö°',
      status: getHashRateStatus(data.hashRate)
    },
    {
      title: 'üè• Health Score',
      value: data.healthScore ? `${data.healthScore}%` : '0%',
      description: 'Overall mining health percentage',
      icon: 'üè•',
      status: getHealthStatus(data.healthScore),
      progress: data.healthScore || 0
    },
    {
      title: '‚õèÔ∏è Mining Status',
      value: data.isMining ? 'Active' : 'Inactive',
      description: 'Current mining activity status',
      icon: '‚õèÔ∏è',
      status: data.isMining ? 'healthy' : 'danger'
    },
    {
      title: 'üî• Boost Level',
      value: data.boostLevel || '0x',
      description: 'Your current mining boost multiplier',
      icon: 'üî•',
      status: getBoostStatus(data.boostLevel)
    }
  ];
  
  overviewCards.forEach(card => {
    const cardElement = createDataCard(card);
    dataGrid.appendChild(cardElement);
  });
  
  // Detailed metrics
  const detailedMetrics = [
    {
      title: 'üí∞ Total Earnings',
      value: data.totalEarnings ? `${parseFloat(data.totalEarnings).toFixed(4)} wPOND` : '0 wPOND',
      description: 'Total wPOND earned from mining',
      icon: 'üí∞'
    },
    {
      title: '‚è±Ô∏è Uptime',
      value: data.uptime || '0h',
      description: 'Mining uptime in the last 24 hours',
      icon: '‚è±Ô∏è'
    },
    {
      title: 'üéØ Efficiency',
      value: data.efficiency ? `${data.efficiency}%` : '0%',
      description: 'Mining efficiency rating',
      icon: 'üéØ',
      progress: data.efficiency || 0,
      status: getEfficiencyStatus(data.efficiency)
    },
    {
      title: 'üîã Energy Usage',
      value: data.energyUsage || '0 kW/h',
      description: 'Estimated energy consumption',
      icon: 'üîã'
    },
    {
      title: 'üå°Ô∏è Temperature',
      value: data.temperature || 'N/A',
      description: 'Mining rig temperature status',
      icon: 'üå°Ô∏è',
      status: getTempStatus(data.temperature)
    },
    {
      title: 'üìÖ Last Active',
      value: data.lastActive ? formatDate(data.lastActive) : 'Unknown',
      description: 'Last recorded mining activity',
      icon: 'üìÖ'
    }
  ];
  
  detailedMetrics.forEach(metric => {
    const cardElement = createDataCard(metric);
    detailedGrid.appendChild(cardElement);
  });
  
  showDashboard();
}

function createDataCard(data) {
  const card = document.createElement('div');
  card.className = 'data-card';
  
  const hasProgress = typeof data.progress === 'number';
  const hasStatus = data.status;
  
  card.innerHTML = `
    <div class="data-card-header">
      <div class="data-card-title">
        <span class="data-card-icon">${data.icon}</span>
        ${data.title}
      </div>
      ${hasStatus ? `<span class="status-badge status-${data.status}">${data.status}</span>` : ''}
    </div>
    <div class="data-card-value">${data.value}</div>
    ${hasProgress ? `
      <div class="progress-bar">
        <div class="progress-fill" style="width: ${Math.min(data.progress, 100)}%"></div>
      </div>
    ` : ''}
    <div class="data-card-description">${data.description}</div>
  `;
  
  return card;
}

// Status helper functions
function getHashRateStatus(hashRate) {
  if (!hashRate || hashRate === '0') return 'danger';
  const rate = parseFloat(hashRate);
  if (rate >= 1000) return 'healthy';
  if (rate >= 500) return 'warning';
  return 'danger';
}

function getHealthStatus(health) {
  if (!health) return 'danger';
  if (health >= 80) return 'healthy';
  if (health >= 60) return 'warning';
  return 'danger';
}

function getBoostStatus(boost) {
  if (!boost) return 'info';
  const level = parseFloat(boost);
  if (level >= 2) return 'healthy';
  if (level >= 1.5) return 'warning';
  return 'info';
}

function getEfficiencyStatus(efficiency) {
  if (!efficiency) return 'danger';
  if (efficiency >= 85) return 'healthy';
  if (efficiency >= 70) return 'warning';
  return 'danger';
}

function getTempStatus(temp) {
  if (!temp || temp === 'N/A') return 'info';
  if (temp.includes('Normal') || temp.includes('Good')) return 'healthy';
  if (temp.includes('Warm') || temp.includes('High')) return 'warning';
  return 'danger';
}

function formatDate(dateString) {
  try {
    const date = new Date(dateString);
    return date.toLocaleDateString() + ' ' + date.toLocaleTimeString();
  } catch (e) {
    return dateString;
  }
}

function toggleBubbles() {
  const container = document.getElementById('bubbleContainer');
  const button = document.getElementById('cookButton');
  const body = document.body;
  
  if (bubbleSystem.animationRunning) {
    bubbleSystem.stop();
    container.classList.add('hidden');
    body.classList.add('glass-off');
    button.classList.add('bubbles-off');
    button.innerHTML = 'üë®‚Äçüç≥ Cook';
  } else {
    bubbleSystem.start();
    container.classList.remove('hidden');
    body.classList.remove('glass-off');
    button.classList.remove('bubbles-off');
    button.innerHTML = 'üë®‚Äçüç≥ Cook';
  }
}

function toggleNav() {
  const navLinks = document.getElementById('navLinks');
  navLinks.classList.toggle('show');
}

function toggleTheme() {
  themeManager.toggle();
}

// Initialize everything when page loads
document.addEventListener('DOMContentLoaded', function() {
  // Initialize theme first
  themeManager.init();
  
  // Then initialize bubble system
  bubbleSystem.init();
  
  const walletInput = document.getElementById('wallet-input');
  
  // Add input event listener for wallet type detection
  walletInput.addEventListener('input', detectWalletType);
  
  // Handle Enter key in wallet input
  walletInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
      fetchMiningData();
    }
  });
});
</script>

</body>
</html>
