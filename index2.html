<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Solana Wallet Link Generator</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #0a0a0a;
      color: #f19cfd;
      text-align: center;
      padding: 2rem;
    }

    .container {
      max-width: 800px;
      margin: auto;
      background: #1a1a1a;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(241, 156, 253, 0.2);
    }

    input[type="text"] {
      width: 80%;
      padding: 1rem;
      margin-bottom: 1rem;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
    }

    button {
      padding: 0.75rem 1.5rem;
      border: none;
      background-color: #7b3aad;
      color: white;
      font-size: 1rem;
      border-radius: 8px;
      cursor: pointer;
    }

    .links-section {
      margin-top: 2rem;
      text-align: left;
    }

    .section-title {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      color: #f19cfd;
    }

    .link-item {
      background: rgba(123, 58, 173, 0.1);
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }

    .link-title {
      font-weight: bold;
      color: #f19cfd;
    }

    .link-url {
      color: #9d4edd;
      text-decoration: underline;
      display: block;
      margin-top: 0.5rem;
    }

    .link-description {
      color: #ccc;
      font-size: 0.9rem;
    }

    .action-buttons button {
      margin-left: 0.5rem;
      background-color: #9d4edd;
    }

    pre {
      background: rgba(241, 156, 253, 0.05);
      padding: 1rem;
      border-radius: 10px;
      white-space: pre-wrap;
      font-size: 0.9rem;
      color: #f19cfd;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üîó Solana Wallet Link Generator</h1>
    <p>Enter your Solana wallet address below to generate useful links and wallet data:</p>
    <input type="text" id="wallet-input" placeholder="Enter Solana wallet address" />
    <br />
    <button onclick="generateSolanaLinks()">Generate Links</button>

    <div id="links-section" class="links-section" style="display:none;">
      <div class="section-title">üß© Personal History Links</div>
      <div id="links-container"></div>
    </div>

    <div id="wallet-data-section" class="links-section" style="display:none;">
      <div class="section-title">üì¶ Wallet Data from Cary0x</div>
      <pre id="wallet-data-pre">Loading...</pre>
    </div>
  </div>

  <script>
    const solanaLinkTemplates = [
      {
        name: "Solscan",
        description: "View your wallet activity on Solscan",
        url: "https://solscan.io/account/{WALLET}"
      },
      {
        name: "Solana Explorer",
        description: "Official Solana blockchain explorer",
        url: "https://explorer.solana.com/address/{WALLET}"
      },
      {
        name: "Solana Beach",
        description: "Track your wallet on Solana Beach",
        url: "https://solanabeach.io/address/{WALLET}"
      }
    ];

    function generateSolanaLinks() {
      const walletAddress = document.getElementById('wallet-input').value.trim();
      const linksContainer = document.getElementById('links-container');
      const linksSection = document.getElementById('links-section');

      if (!walletAddress) {
        alert('Please enter a Solana wallet address!');
        return;
      }

      if (walletAddress.length < 32 || walletAddress.length > 44) {
        alert('Please enter a valid Solana wallet address');
        return;
      }

      linksContainer.innerHTML = '';
      solanaLinkTemplates.forEach(template => {
        const finalUrl = template.url.replace(/{WALLET}/g, walletAddress);

        const linkDiv = document.createElement('div');
        linkDiv.className = 'link-item';
        linkDiv.innerHTML = `
          <div>
            <div class="link-title">${template.name}</div>
            <a href="${finalUrl}" target="_blank" class="link-url">Open ${template.name} ‚Üí</a>
            <div class="link-description">${template.description}</div>
          </div>
        `;
        linksContainer.appendChild(linkDiv);
      });

      linksSection.style.display = 'block';
      fetchWalletData(walletAddress);
    }

    function fetchWalletData(wallet) {
      const pre = document.getElementById("wallet-data-pre");
      const section = document.getElementById("wallet-data-section");

      section.style.display = "block";
      pre.textContent = "üîÑ Loading wallet data from Cary0x...";

      const proxy = "https://corsproxy.io/?";
      const manifestURL = proxy + encodeURIComponent(`https://www.cary0x.com/api/manifest/${wallet}`);
      const healthURL = proxy + encodeURIComponent(`https://www.cary0x.com/api/health/${wallet}`);

      Promise.all([
        fetch(manifestURL).then(async res => {
          const contentType = res.headers.get("content-type");
          if (!res.ok || !contentType.includes("application/json")) {
            const text = await res.text();
            throw new Error(`Manifest error: ${res.status}\n${text}`);
          }
          return res.json();
        }),
        fetch(healthURL).then(async res => {
          const contentType = res.headers.get("content-type");
          if (!res.ok || !contentType.includes("application/json")) {
            const text = await res.text();
            throw new Error(`Health error: ${res.status}\n${text}`);
          }
          return res.json();
        })
      ])
      .then(([manifest, health]) => {
        pre.textContent = `üìÑ Manifest:\n${JSON.stringify(manifest, null, 2)}\n\n‚ù§Ô∏è Health:\n${JSON.stringify(health, null, 2)}`;
      })
      .catch(error => {
        pre.textContent = `‚ùå Failed to load wallet data:\n\n${error.message}`;
      });
    }
  </script>
</body>
</html>
